{"ast":null,"code":"import _classCallCheck from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Navbar,Nav,NavDropdown}from'react-bootstrap';import{Redirect}from'react-router-dom';//send to app.js which component is active. \nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NavBar=/*#__PURE__*/function(_React$Component){_inherits(NavBar,_React$Component);var _super=_createSuper(NavBar);function NavBar(props){var _this;_classCallCheck(this,NavBar);_this=_super.call(this,props);_this.RedirectToHomePage=function(){fetch('/logout/'+_this.state.LoggedUser,{method:'GET'})//logout user - delete tokens\n.then(sessionStorage.removeItem(\"username\"),_this.setState({redirectHome:true}));};_this.handleRedirectToUpdateUser=function(){_this.setState({redirectToUpdate:true});};_this.handleDeleteUser=function(){fetch('/delete/myuser',{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"username\":_this.state.LoggedUser})}).then(_this.RedirectToHomePage()).catch(function(error){alert(error);});};_this.state={redirectHome:false,redirectToUpdate:false,LoggedUser:sessionStorage.getItem(\"username\")};_this.handleDeleteUser=_this.handleDeleteUser.bind(_assertThisInitialized(_this));_this.RedirectToHomePage=_this.RedirectToHomePage.bind(_assertThisInitialized(_this));_this.handleRedirectToUpdateUser=_this.handleRedirectToUpdateUser.bind(_assertThisInitialized(_this));return _this;}_createClass(NavBar,[{key:\"render\",value:function render(){if(!this.state.LoggedUser){return/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/authError'}});}if(this.state.redirectHome){return/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/'}});}if(this.state.redirectToUpdate){return/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/updateUser'}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Navbar,{variant:\"dark\",children:[/*#__PURE__*/_jsx(Navbar.Brand,{href:\"/blog\",children:\"Blog-App\"}),/*#__PURE__*/_jsx(Nav,{className:\"mr-auto\"}),/*#__PURE__*/_jsxs(Navbar.Collapse,{className:\"justify-content-end\",children:[/*#__PURE__*/_jsx(Navbar.Text,{children:\"Signed in as:\"}),/*#__PURE__*/_jsxs(NavDropdown,{title:this.state.LoggedUser,id:\"nav-dropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:this.handleRedirectToUpdateUser,children:\"Update user\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:this.handleDeleteUser,children:\"Delete user\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:this.RedirectToHomePage,children:\"Log-out\"})]})]})]}),/*#__PURE__*/_jsx(\"br\",{})]});}}]);return NavBar;}(React.Component);;export default NavBar;","map":{"version":3,"sources":["C:/Users/yonat/Blog-app/src/components/navbar.jsx"],"names":["React","Navbar","Nav","NavDropdown","Redirect","NavBar","props","RedirectToHomePage","fetch","state","LoggedUser","method","then","sessionStorage","removeItem","setState","redirectHome","handleRedirectToUpdateUser","redirectToUpdate","handleDeleteUser","headers","body","JSON","stringify","catch","error","alert","getItem","bind","pathname","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Navbar, Nav, NavDropdown} from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n//send to app.js which component is active. \r\nclass NavBar extends React.Component {\r\n  constructor(props) { \r\n    super(props)\r\n    this.state = {\r\n      redirectHome: false,\r\n      redirectToUpdate: false,\r\n      LoggedUser: sessionStorage.getItem(\"username\")\r\n    }\r\n\r\n    this.handleDeleteUser = this.handleDeleteUser.bind(this)\r\n    this.RedirectToHomePage = this.RedirectToHomePage.bind(this)\r\n    this.handleRedirectToUpdateUser = this.handleRedirectToUpdateUser.bind(this)\r\n  }\r\n\r\n  RedirectToHomePage = () => {\r\n    fetch('/logout/' + this.state.LoggedUser , {\r\n      method: 'GET'\r\n    }) //logout user - delete tokens\r\n    .then( \r\n      sessionStorage.removeItem(\"username\"),\r\n      this.setState({\r\n        redirectHome: true,\r\n      })\r\n    )\r\n  }\r\n\r\n  handleRedirectToUpdateUser = () => {\r\n      this.setState({\r\n        redirectToUpdate: true\r\n      })\r\n  }\r\n\r\n  handleDeleteUser = () => {\r\n    fetch('/delete/myuser', {\r\n      method: 'DELETE',\r\n      headers: {'Content-Type':'application/json'},\r\n      body: JSON.stringify({ \"username\": this.state.LoggedUser })\r\n    })\r\n    .then(\r\n      this.RedirectToHomePage()\r\n    )\r\n    .catch((error) => {\r\n      alert(error)\r\n    })\r\n  }\r\n\r\n  render () {\r\n    if (!this.state.LoggedUser) {\r\n      return (\r\n          <Redirect to={{\r\n            pathname: '/authError',\r\n        }}/>\r\n      )}\r\n    if (this.state.redirectHome) {\r\n      return (\r\n          <Redirect to={{\r\n            pathname: '/',\r\n        }}/>\r\n      )}\r\n      if (this.state.redirectToUpdate) {\r\n        return (\r\n            <Redirect to={{\r\n              pathname: '/updateUser',\r\n          }}/>\r\n        )}\r\n    return ( \r\n      <>\r\n        <Navbar variant=\"dark\">\r\n          <Navbar.Brand href=\"/blog\">Blog-App</Navbar.Brand>\r\n          <Nav className=\"mr-auto\">\r\n            {/* <Nav.Link href=\"/blog\">Blog</Nav.Link>\r\n            <Nav.Link href=\"/chat\">Chat</Nav.Link>\r\n            <Nav.Link href=\"/about\">About</Nav.Link> */}\r\n          </Nav>\r\n          <Navbar.Collapse className=\"justify-content-end\">\r\n          <Navbar.Text>\r\n            Signed in as:\r\n          </Navbar.Text>\r\n          <NavDropdown title={this.state.LoggedUser} id=\"nav-dropdown\">\r\n        <NavDropdown.Item onClick={this.handleRedirectToUpdateUser}>Update user</NavDropdown.Item>\r\n        <NavDropdown.Item onClick={this.handleDeleteUser}>Delete user</NavDropdown.Item>\r\n        <NavDropdown.Item onClick={this.RedirectToHomePage}>Log-out</NavDropdown.Item>\r\n        </NavDropdown>\r\n          </Navbar.Collapse>\r\n        </Navbar>\r\n        <br />\r\n      </>\r\n    );\r\n  };\r\n};\r\n\r\nexport default NavBar"]},"metadata":{},"sourceType":"module"}