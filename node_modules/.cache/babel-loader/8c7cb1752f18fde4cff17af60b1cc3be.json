{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yonat\\\\Blog-app\\\\src\\\\components\\\\blog-components\\\\post-components\\\\like.jsx\";\nimport React from 'react';\nimport { AiFillLike } from 'react-icons/ai';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Like extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.UpdateLikes = () => {\n      this.setState({\n        clicked: !this.state.clicked,\n        totalLikes: !this.state.clicked ? this.state.totalLikes + 1 : this.state.totalLikes && this.state.clicked ? this.state.totalLikes - 1 : this.state.totalLikes\n      });\n      fetch('/posts/update-likes', {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"postID\": this.props._id,\n          \"userID\": sessionStorage.getItem(\"_id\"),\n          \"totalLikes\": this.state.totalLikes\n        })\n      }).catch(alert(\"An error occured!\"));\n    };\n\n    this.state = {\n      totalLikes: this.props.totalLikes,\n      clicked: false\n    };\n    console.log(sessionStorage.getItem(\"_id\"));\n    fetch('/posts/check-like', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"userID\": sessionStorage.getItem(\"_id\"),\n        \"postID\": this.props._id\n      })\n    }).then(response => response.json()).then(response => {\n      this.setState({\n        clicked: response.value\n      });\n      console.log(this.state.clicked);\n    }).catch(error => alert(error));\n    this.UpdateLikes = this.UpdateLikes.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Like\",\n      children: [/*#__PURE__*/_jsxDEV(AiFillLike, {\n        className: !this.state.clicked ? \"like-btn\" : \"clicked-like\",\n        onClick: this.UpdateLikes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\" \", this.state.totalLikes]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Like;","map":{"version":3,"sources":["C:/Users/yonat/Blog-app/src/components/blog-components/post-components/like.jsx"],"names":["React","AiFillLike","Like","Component","constructor","props","UpdateLikes","setState","clicked","state","totalLikes","fetch","method","headers","body","JSON","stringify","_id","sessionStorage","getItem","catch","alert","console","log","then","response","json","value","error","bind","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,gBAA3B;;;AAEA,MAAMC,IAAN,SAAmBF,KAAK,CAACG,SAAzB,CAAmC;AAC/BC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA2BnBC,WA3BmB,GA2BL,MAAM;AAChB,WAAKC,QAAL,CAAc;AACVC,QAAAA,OAAO,EAAE,CAAC,KAAKC,KAAL,CAAWD,OADX;AAEVE,QAAAA,UAAU,EAAG,CAAC,KAAKD,KAAL,CAAWD,OAAb,GAAwB,KAAKC,KAAL,CAAWC,UAAX,GAAwB,CAAhD,GACX,KAAKD,KAAL,CAAWC,UAAX,IAAyB,KAAKD,KAAL,CAAWD,OAArC,GAAgD,KAAKC,KAAL,CAAWC,UAAX,GAAwB,CAAxE,GACA,KAAKD,KAAL,CAAWC;AAJD,OAAd;AAOAC,MAAAA,KAAK,CAAC,qBAAD,EAAwB;AACzBC,QAAAA,MAAM,EAAE,OADiB;AAEzBC,QAAAA,OAAO,EAAE;AAAC,0BAAe;AAAhB,SAFgB;AAGzBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjB,oBAAU,KAAKX,KAAL,CAAWY,GADJ;AAEjB,oBAAUC,cAAc,CAACC,OAAf,CAAuB,KAAvB,CAFO;AAGjB,wBAAc,KAAKV,KAAL,CAAWC;AAHR,SAAf;AAHmB,OAAxB,CAAL,CASCU,KATD,CASOC,KAAK,CAAC,mBAAD,CATZ;AAUH,KA7CkB;;AAEf,SAAKZ,KAAL,GAAa;AACTC,MAAAA,UAAU,EAAE,KAAKL,KAAL,CAAWK,UADd;AAETF,MAAAA,OAAO,EAAE;AAFA,KAAb;AAIAc,IAAAA,OAAO,CAACC,GAAR,CAAYL,cAAc,CAACC,OAAf,CAAuB,KAAvB,CAAZ;AACAR,IAAAA,KAAK,CAAC,mBAAD,EAAsB;AACvBC,MAAAA,MAAM,EAAE,MADe;AAEvBC,MAAAA,OAAO,EAAE;AAAC,wBAAe;AAAhB,OAFc;AAGvBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjB,kBAAUE,cAAc,CAACC,OAAf,CAAuB,KAAvB,CADO;AAEjB,kBAAU,KAAKd,KAAL,CAAWY;AAFJ,OAAf;AAHiB,KAAtB,CAAL,CAQCO,IARD,CAQMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARlB,EASCF,IATD,CASMC,QAAQ,IAAI;AACd,WAAKlB,QAAL,CAAc;AACVC,QAAAA,OAAO,EAAEiB,QAAQ,CAACE;AADR,OAAd;AAGAL,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKd,KAAL,CAAWD,OAAvB;AACH,KAdD,EAeCY,KAfD,CAeOQ,KAAK,IAAIP,KAAK,CAACO,KAAD,CAfrB;AAiBA,SAAKtB,WAAL,GAAmB,KAAKA,WAAL,CAAiBuB,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AAsBDC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACI,QAAC,UAAD;AAAY,QAAA,SAAS,EAAE,CAAC,KAAKrB,KAAL,CAAWD,OAAZ,GAAsB,UAAtB,GAAmC,cAA1D;AAA0E,QAAA,OAAO,EAAE,KAAKF;AAAxF;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA,wBAAQ,KAAKG,KAAL,CAAWC,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAMH;;AAvD8B;;AA0DnC,eAAeR,IAAf","sourcesContent":["import React from 'react';\r\nimport { AiFillLike } from 'react-icons/ai';\r\n\r\nclass Like extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            totalLikes: this.props.totalLikes,\r\n            clicked: false\r\n        }\r\n        console.log(sessionStorage.getItem(\"_id\"))\r\n        fetch('/posts/check-like', {\r\n            method: 'POST',\r\n            headers: {'Content-Type':'application/json'},\r\n            body: JSON.stringify({\r\n                \"userID\": sessionStorage.getItem(\"_id\"),\r\n                \"postID\": this.props._id,\r\n            })\r\n        })\r\n        .then(response => response.json())\r\n        .then(response => {\r\n            this.setState({\r\n                clicked: response.value\r\n            })\r\n            console.log(this.state.clicked)\r\n        })\r\n        .catch(error => alert(error))\r\n\r\n        this.UpdateLikes = this.UpdateLikes.bind(this)\r\n    }\r\n\r\n    UpdateLikes = () => {\r\n        this.setState({\r\n            clicked: !this.state.clicked,\r\n            totalLikes: (!this.state.clicked) ? this.state.totalLikes + 1 :  \r\n            (this.state.totalLikes && this.state.clicked) ? this.state.totalLikes - 1 : \r\n            this.state.totalLikes  \r\n        })\r\n        \r\n        fetch('/posts/update-likes', {\r\n            method: 'PATCH',\r\n            headers: {'Content-Type':'application/json'},\r\n            body: JSON.stringify({\r\n                \"postID\": this.props._id,\r\n                \"userID\": sessionStorage.getItem(\"_id\"),\r\n                \"totalLikes\": this.state.totalLikes\r\n            })\r\n        })\r\n        .catch(alert(\"An error occured!\"))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"Like\">\r\n                <AiFillLike className={!this.state.clicked ? \"like-btn\" : \"clicked-like\"} onClick={this.UpdateLikes}/>\r\n                <span> {this.state.totalLikes}</span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Like"]},"metadata":{},"sourceType":"module"}