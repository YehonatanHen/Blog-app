{"ast":null,"code":"import _classCallCheck from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{AiFillLike}from'react-icons/ai';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Like=/*#__PURE__*/function(_React$Component){_inherits(Like,_React$Component);var _super=_createSuper(Like);function Like(props){var _this;_classCallCheck(this,Like);_this=_super.call(this,props);_this.UpdateLikes=function(){_this.setState({clicked:!_this.state.clicked,totalLikes:!_this.state.clicked?_this.state.totalLikes+1:_this.state.totalLikes&&_this.state.clicked?_this.state.totalLikes-1:_this.state.totalLikes});fetch('/posts/update-likes',{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"postID\":_this.props._id,\"userID\":sessionStorage.getItem(\"_id\"),\"totalLikes\":_this.state.totalLikes})}).catch(function(error){return alert(\"An error occured!\");});};_this.state={totalLikes:_this.props.totalLikes,clicked:false};console.log(sessionStorage.getItem(\"_id\"));fetch('/posts/check-like',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"userID\":sessionStorage.getItem(\"_id\"),\"postID\":_this.props._id})}).then(function(response){return response.json();}).then(function(response){_this.setState({clicked:response.value});console.log(_this.state.clicked);}).catch(function(error){return alert(\"An error occured!\");});_this.UpdateLikes=_this.UpdateLikes.bind(_assertThisInitialized(_this));return _this;}_createClass(Like,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"Like\",children:[/*#__PURE__*/_jsx(AiFillLike,{className:!this.state.clicked?\"like-btn\":\"clicked-like\",onClick:this.UpdateLikes}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",this.state.totalLikes]})]});}}]);return Like;}(React.Component);export default Like;","map":{"version":3,"sources":["C:/Users/yonat/Blog-app/src/components/blog-components/post-components/like.jsx"],"names":["React","AiFillLike","Like","props","UpdateLikes","setState","clicked","state","totalLikes","fetch","method","headers","body","JSON","stringify","_id","sessionStorage","getItem","catch","error","alert","console","log","then","response","json","value","bind","Component"],"mappings":"ssBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,gBAA3B,C,2FAEMC,CAAAA,I,wGACF,cAAYC,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EADe,MA2BnBC,WA3BmB,CA2BL,UAAM,CAChB,MAAKC,QAAL,CAAc,CACVC,OAAO,CAAE,CAAC,MAAKC,KAAL,CAAWD,OADX,CAEVE,UAAU,CAAG,CAAC,MAAKD,KAAL,CAAWD,OAAb,CAAwB,MAAKC,KAAL,CAAWC,UAAX,CAAwB,CAAhD,CACX,MAAKD,KAAL,CAAWC,UAAX,EAAyB,MAAKD,KAAL,CAAWD,OAArC,CAAgD,MAAKC,KAAL,CAAWC,UAAX,CAAwB,CAAxE,CACA,MAAKD,KAAL,CAAWC,UAJD,CAAd,EAOAC,KAAK,CAAC,qBAAD,CAAwB,CACzBC,MAAM,CAAE,OADiB,CAEzBC,OAAO,CAAE,CAAC,eAAe,kBAAhB,CAFgB,CAGzBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjB,SAAU,MAAKX,KAAL,CAAWY,GADJ,CAEjB,SAAUC,cAAc,CAACC,OAAf,CAAuB,KAAvB,CAFO,CAGjB,aAAc,MAAKV,KAAL,CAAWC,UAHR,CAAf,CAHmB,CAAxB,CAAL,CASCU,KATD,CASO,SAAAC,KAAK,QAAIC,CAAAA,KAAK,CAAC,mBAAD,CAAT,EATZ,EAUH,CA7CkB,CAEf,MAAKb,KAAL,CAAa,CACTC,UAAU,CAAE,MAAKL,KAAL,CAAWK,UADd,CAETF,OAAO,CAAE,KAFA,CAAb,CAIAe,OAAO,CAACC,GAAR,CAAYN,cAAc,CAACC,OAAf,CAAuB,KAAvB,CAAZ,EACAR,KAAK,CAAC,mBAAD,CAAsB,CACvBC,MAAM,CAAE,MADe,CAEvBC,OAAO,CAAE,CAAC,eAAe,kBAAhB,CAFc,CAGvBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjB,SAAUE,cAAc,CAACC,OAAf,CAAuB,KAAvB,CADO,CAEjB,SAAU,MAAKd,KAAL,CAAWY,GAFJ,CAAf,CAHiB,CAAtB,CAAL,CAQCQ,IARD,CAQM,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EARd,EASCF,IATD,CASM,SAAAC,QAAQ,CAAI,CACd,MAAKnB,QAAL,CAAc,CACVC,OAAO,CAAEkB,QAAQ,CAACE,KADR,CAAd,EAGAL,OAAO,CAACC,GAAR,CAAY,MAAKf,KAAL,CAAWD,OAAvB,EACH,CAdD,EAeCY,KAfD,CAeO,SAAAC,KAAK,QAAIC,CAAAA,KAAK,CAAC,mBAAD,CAAT,EAfZ,EAiBA,MAAKhB,WAAL,CAAmB,MAAKA,WAAL,CAAiBuB,IAAjB,+BAAnB,CAxBe,aAyBlB,C,uCAsBD,iBAAS,CACL,mBACI,aAAK,SAAS,CAAC,MAAf,wBACI,KAAC,UAAD,EAAY,SAAS,CAAE,CAAC,KAAKpB,KAAL,CAAWD,OAAZ,CAAsB,UAAtB,CAAmC,cAA1D,CAA0E,OAAO,CAAE,KAAKF,WAAxF,EADJ,cAEI,4BAAQ,KAAKG,KAAL,CAAWC,UAAnB,GAFJ,GADJ,CAMH,C,kBAvDcR,KAAK,CAAC4B,S,EA0DzB,cAAe1B,CAAAA,IAAf","sourcesContent":["import React from 'react';\r\nimport { AiFillLike } from 'react-icons/ai';\r\n\r\nclass Like extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            totalLikes: this.props.totalLikes,\r\n            clicked: false\r\n        }\r\n        console.log(sessionStorage.getItem(\"_id\"))\r\n        fetch('/posts/check-like', {\r\n            method: 'POST',\r\n            headers: {'Content-Type':'application/json'},\r\n            body: JSON.stringify({\r\n                \"userID\": sessionStorage.getItem(\"_id\"),\r\n                \"postID\": this.props._id,\r\n            })\r\n        })\r\n        .then(response => response.json())\r\n        .then(response => {\r\n            this.setState({\r\n                clicked: response.value\r\n            })\r\n            console.log(this.state.clicked)\r\n        })\r\n        .catch(error => alert(\"An error occured!\"))\r\n\r\n        this.UpdateLikes = this.UpdateLikes.bind(this)\r\n    }\r\n\r\n    UpdateLikes = () => {\r\n        this.setState({\r\n            clicked: !this.state.clicked,\r\n            totalLikes: (!this.state.clicked) ? this.state.totalLikes + 1 :  \r\n            (this.state.totalLikes && this.state.clicked) ? this.state.totalLikes - 1 : \r\n            this.state.totalLikes  \r\n        })\r\n        \r\n        fetch('/posts/update-likes', {\r\n            method: 'PATCH',\r\n            headers: {'Content-Type':'application/json'},\r\n            body: JSON.stringify({\r\n                \"postID\": this.props._id,\r\n                \"userID\": sessionStorage.getItem(\"_id\"),\r\n                \"totalLikes\": this.state.totalLikes\r\n            })\r\n        })\r\n        .catch(error => alert(\"An error occured!\"))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"Like\">\r\n                <AiFillLike className={!this.state.clicked ? \"like-btn\" : \"clicked-like\"} onClick={this.UpdateLikes}/>\r\n                <span> {this.state.totalLikes}</span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Like"]},"metadata":{},"sourceType":"module"}