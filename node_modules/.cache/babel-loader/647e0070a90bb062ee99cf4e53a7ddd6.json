{"ast":null,"code":"import _classCallCheck from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/yonat/Blog-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Card,Accordion,Button}from'react-bootstrap';import{Redirect}from'react-router-dom';import Like from'./post-components/like';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var key=0;var Post=/*#__PURE__*/function(_React$Component){_inherits(Post,_React$Component);var _super=_createSuper(Post);function Post(props){var _this;_classCallCheck(this,Post);_this=_super.call(this,props);_this.deletePost=function(){fetch(\"/posts/\".concat(_this.props._id),{method:'DELETE',headers:{'Content-Type':'application/json'}}).then(function(res){if(res.status===404||res.status===500){alert(res.statusText);}else{alert(\"Post \".concat(_this.props.title,\" deleted successfully.\"));window.location.reload(false);}}).catch(function(error){alert(error);});};_this.redirectToUpdatePost=function(){_this.setState({redirectToUpdate:true});};_this.userButtons=function(){if(sessionStorage.getItem('_id')===_this.props.author){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"sm\",onClick:_this.redirectToUpdatePost,children:\"Update Post\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"sm\",onClick:_this.deletePost,children:\"Delete Post\"})]});}return null;};_this.key=0;_this.state={redirectToUpdate:false};_this.userButtons=_this.userButtons.bind(_assertThisInitialized(_this));_this.deletePost=_this.deletePost.bind(_assertThisInitialized(_this));_this.redirectToUpdatePost=_this.redirectToUpdatePost.bind(_assertThisInitialized(_this));return _this;}_createClass(Post,[{key:\"render\",value:function render(){if(this.state.redirectToUpdate)return/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/updatePost',state:{_id:this.props._id,body:this.props.body,title:this.props.title}}});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{className:\"post-card\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(Accordion.Toggle,{className:\"post-btn\",eventKey:(++key).toString(),children:this.props.title})}),/*#__PURE__*/_jsx(Accordion.Collapse,{eventKey:key.toString(),children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"p\",{children:this.props.body}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-sub-btns\",children:[this.userButtons(),/*#__PURE__*/_jsx(Like,{_id:this.props._id,author:this.props.author,totalLikes:this.props.likes})]})]})})]})});}}]);return Post;}(React.Component);;export default Post;","map":{"version":3,"sources":["C:/Users/yonat/Blog-app/src/components/blog-components/post.jsx"],"names":["React","Card","Accordion","Button","Redirect","Like","key","Post","props","deletePost","fetch","_id","method","headers","then","res","status","alert","statusText","title","window","location","reload","catch","error","redirectToUpdatePost","setState","redirectToUpdate","userButtons","sessionStorage","getItem","author","state","bind","pathname","body","toString","likes","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Card, Accordion, Button } from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Like from './post-components/like'\r\nvar key = 0\r\n\r\nclass Post extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.key = 0\r\n        this.state = {\r\n            redirectToUpdate: false\r\n        }\r\n\r\n        this.userButtons = this.userButtons.bind(this)\r\n        this.deletePost = this.deletePost.bind(this)\r\n        this.redirectToUpdatePost = this.redirectToUpdatePost.bind(this)\r\n    }\r\n\r\n    deletePost = () => {\r\n        fetch(`/posts/${this.props._id}`, {\r\n            method: 'DELETE',\r\n            headers: {'Content-Type':'application/json'}\r\n        })\r\n        .then((res) => {\r\n            if( res.status === 404 || res.status === 500) {\r\n                alert(res.statusText)\r\n            }\r\n            else {\r\n                alert(`Post ${this.props.title} deleted successfully.`)\r\n                window.location.reload(false)\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            alert(error)\r\n        })\r\n    }\r\n\r\n    redirectToUpdatePost = () => {\r\n        this.setState({\r\n            redirectToUpdate: true\r\n        })\r\n    }\r\n\r\n    userButtons = () => {\r\n        if (sessionStorage.getItem('_id') === (this.props.author)) {\r\n            return (\r\n                <>\r\n                    <Button variant=\"secondary\" size=\"sm\" onClick={this.redirectToUpdatePost}>Update Post</Button>\r\n                    <Button variant=\"danger\" size=\"sm\"  onClick={this.deletePost}>Delete Post</Button>\r\n                </>\r\n            )\r\n        }\r\n        return null\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.state.redirectToUpdate)\r\n            return (\r\n            <Redirect to={{\r\n                pathname: '/updatePost',\r\n                state: {  \r\n                _id: this.props._id,\r\n                body: this.props.body, \r\n                title: this.props.title }\r\n            }}/>\r\n            )\r\n        return (\r\n            <>\r\n            <Card className=\"post-card\">\r\n            <Card.Header>\r\n                <Accordion.Toggle className=\"post-btn\" eventKey={(++key).toString()}>\r\n                    {this.props.title}\r\n                </Accordion.Toggle>\r\n            </Card.Header>\r\n                <Accordion.Collapse eventKey={(key).toString()}>\r\n                    <Card.Body>\r\n                        <p>\r\n                            {this.props.body}\r\n                        </p>\r\n                        <br/>\r\n                        <div className=\"post-sub-btns\">\r\n                            {this.userButtons()}\r\n                            <Like \r\n                                _id = {this.props._id}  \r\n                                author = {this.props.author}\r\n                                totalLikes = {this.props.likes}\r\n                            />\r\n                        </div>\r\n                    </Card.Body>\r\n                </Accordion.Collapse>\r\n            </Card>\r\n            </>\r\n        );\r\n    };\r\n };\r\n\r\n export default Post\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}